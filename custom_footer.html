<html>
  <body>
    <select id="version-switcher" onchange="switchVersion(this)">
      <option value="doxy_docs">main</option>
      <option value="dev_doxy_docs">dev</option>
    </select>

    <script>
      function switchVersion(select) {
        var version = select.value;
        var currentPath = window.location.pathname;
        console.log("version: " + version);
        console.log("dis current path: " + currentPath);
        // Construct the new path
        var newPath;
        if (version === "doxy_docs") {
          if (currentPath.includes("/local_doxy_docs/")) {
            newPath = currentPath.replace(
              /\/local_doxy_docs\/html\//,
              "/doxy_docs/html/"
            );
          } else {
            newPath = currentPath.replace(
              /\/dev_doxy_docs\/html\//,
              "/doxy_docs/html/"
            );
          }
        } else {
          if (currentPath.includes("/local_doxy_docs/")) {
            console.log("hi");
            newPath = currentPath.replace(
              /\/local_doxy_docs\/html\//,
              "/dev_doxy_docs/html/"
            );
          } else {
            console.log("oh hi");
            newPath = currentPath.replace(
              /\/doxy_docs\/html\//,
              "/dev_doxy_docs/html/"
            );
          }
        }

        console.log("Switching to: " + newPath); // Debug log

        // Navigate to the new path
        window.location.href = newPath;
      }

      // Ensure the select element reflects the current version on page load
      window.onload = function () {
        var currentPath = window.location.pathname;
        var selectElement = document.getElementById("version-switcher");

        if (currentPath.includes("/dev_doxy_docs/")) {
          selectElement.value = "dev_doxy_docs";
        } else {
          selectElement.value = "doxy_docs";
        }

        console.log("Current path: " + currentPath); // Debug log
      };
    </script>
  </body>
</html>
